{"commits":[{"commit":"2bb23a9a27237f89226e8f3c640e813f33a4faa7","date":"2014-10-19T14:03:36+02:00","author":"Allan Odgaard","summary":"Pass error/warning text to TextMate when setting gutter mark","body":"Requires TextMate 2.0-beta.3"},{"commit":"bfd2e332aef8b77ba5c33999eda1dc110595f15e","date":"2014-10-15T21:20:05+02:00","author":"Allan Odgaard","summary":"Let TextMate::Executor add warning/error marks in gutter","body":"Requires TextMate 2.0-alpha.9575"},{"commit":"e3397b447a0f8959d600c7fc33ea29491781fdc1","date":"2014-08-30T16:30:02+09:00","author":"Yuu Q","summary":"Change html_header() to call ruby18 instead of TM_RUBY","body":"Bundle support ruby codes are currently have not been updated for ruby 2.0,\nso anything using bundle support ruby codes they must be run on ruby 1.8."},{"commit":"0a12001c335da1e739a5a6d64368bb781914f50f","date":"2014-08-17T13:28:42+02:00","author":"Allan Odgaard","summary":"Allow markdown parameters to be set via TM_MARKDOWN","body":"For example you may want to set:\n\n    TM_MARKDOWN = &quot;/path/to/multimarkdown --nosmart&quot;\n\nPreviously this would fail because TM_MARKDOWN was treated as a single command (with possible spaces in its path).\n\nThis commit makes the same change for TM_SMARTYPANTS."},{"commit":"db8442eb683038111991beab3af5771f1a8d599a","date":"2014-08-01T22:13:55+02:00","author":"Allan Odgaard","summary":"Improve ruby 1.8.7 installer","body":"If installing fails we report failure back to TextMate so that it correctly aborts the command (e.g. if command was supposed to replace input, it won’t swallow the input). We write the error log to stderr so that TextMate will show it in the failure sheet."},{"commit":"055ffbaa266b6760ea897981c563c596d8a094e2","date":"2014-08-01T21:35:54+02:00","author":"Allan Odgaard","summary":"Better fix for the hardcoded library load path in ruby 1.8"},{"commit":"0353e9e96e840980726884baafe88a4a6d0db01d","date":"2014-07-30T12:33:11+02:00","author":"Allan Odgaard","summary":"Setup RUBYLIB (for our ruby 1.8) to find the included libraries","body":"The binary has hardcoded paths with respect to where the support library is found. To test run: ruby -e&#39;puts $:&#39;.\n\nThis is just a quick fix, I am not sure what the proper fix would be since anything below user’s folder is variable. Perhaps we should install ruby 1.8 to /Library instead."},{"commit":"55d5467b475dcff1a0f53e27303cd866a6a21297","date":"2014-07-22T23:27:02-05:00","author":"Michael Sheets","summary":"Use Ruby 1.8 for compatibility on Yosemite","body":"This is for backwards compatibility with bundle items that were designed for ruby 1.8. Input is passed along to ruby 1.8 if already installed or if needed downloading and installing a copy for TextMates exclusive use. This does not affect the system ruby version or any other part of the system. Revised from previous commit due to an error in the ruby build."},{"commit":"50b673e50c4c933d731f8defe0a3127b9e6fb19d","date":"2014-07-13T15:33:30-05:00","author":"Michael Sheets","summary":"Revert &quot;Use Ruby 1.8 for compatibility on Yosemite&quot;","body":"Revert due to library error referenced in #11."},{"commit":"d31c137f39ae94a1c386bc5d59a7fe40cfd29c12","date":"2014-07-11T18:42:13-05:00","author":"Michael Sheets","summary":"Use Ruby 1.8 for compatibility on Yosemite","body":"This is for backwards compatibility with bundle items that were designed for ruby 1.8. Input is passed along to ruby 1.8 if already installed or if needed downloading and installing a copy for TextMates exclusive use. This does not affect the system ruby version or any other part of the system."},{"commit":"8c523b95daccf917bc7885581d170144ceaa3b5f","date":"2014-06-17T23:47:57-05:00","author":"Michael Sheets","summary":"Add shim for Ruby 1.8","body":"Redirects to ruby 1.8 found on 10.9 and older and provides and error message on Yosemite. This is to be used by bundles that have not yet been updated for 2.0 of ruby."},{"commit":"c00c25b44d60463b7e9933a6b29c89490c1d2446","date":"2014-04-17T16:54:55+07:00","author":"Allan Odgaard","summary":"Fix exception when finding links in output from run commands","body":"The script uses ruby’s ‘expand_path’ with the potential path found in the command output, but this command can throw an exception (on non-path arguments)."},{"commit":"f50a13922d1c6b379adea1e4f6e28054e28da351","date":"2014-04-07T13:11:49+07:00","author":"Allan Odgaard","summary":"Let <kbd class='keyEquivalent'>⌃C</kbd> signal direct child (of Executor) instead of deepest child","body":"This mimics how a shell works and presumably anything run via TextMate::Executor that spawns child processes (like a build system) will forward SIGINT/SIGTERM to the proper children."},{"commit":"37a5febf769fd271fb6f7cc69a4d11155221f704","date":"2014-03-31T13:16:04+07:00","author":"Allan Odgaard","summary":"Users of Executor.run must explicitly request TM_ERROR_FD","body":"This is done by setting ‘:create_error_pipe’ to ‘true’ in the options passed to the function.\n\nThe reason we cannot enable it for all commands is that if the command spawns a background/daemon process without closing all open file descriptors, then the new process will effectively stall TextMate::Executor, as it’s preventing the file descriptor from being closed in the parent.\n\nThis commit requires that existing uses of TM_ERROR_FD be updated to specify the new argument — since only a handful of commands use it, this is simpler than having to update all commands that does not use this feature of TextMate::Executor."},{"commit":"0f39ae006ef08b25d5b12f9086ef88455fe1f972","date":"2014-03-31T12:48:56+07:00","author":"Allan Odgaard","summary":"Set FD_CLOEXEC when creating pipes","body":"This way we do not have to explicitly close the pipes after fork’ing."},{"commit":"4852c168d1513bc0564ed88e94175d042aa770c8","date":"2014-03-31T10:36:17+07:00","author":"Allan Odgaard","summary":"Use symbolic constant for Fcntl::FD_CLOEXEC"},{"commit":"6afc18e488dde32a18796a8b6f0bd3845506c518","date":"2014-02-25T01:07:11-06:00","author":"Michael Sheets","summary":"Revert &quot;Switch to using AppleScript Runner for request_color&quot;","body":"This reverts commit 765cfac73df5765856e935ff46b55fd18a3c045f.\n\nWith textmate/textmate@f128304d75333d052a73b200de2addd4eada9cdf this can be reverted."},{"commit":"431c51f177062ed0ad3db5e5108fa25244056668","date":"2014-02-25T01:05:51-06:00","author":"Michael Sheets","summary":"Revert &quot;Use &quot;System Events&quot; for request_color()&quot;","body":"This reverts commit 9825e49f421dbe23bf3a6986e10dae292f7df022.\n\nWith textmate/textmate@f128304d75333d052a73b200de2addd4eada9cdf this can be reverted."},{"commit":"9825e49f421dbe23bf3a6986e10dae292f7df022","date":"2013-11-20T13:37:05-08:00","author":"Jesse Burgheimer","summary":"Use &quot;System Events&quot; for request_color()","body":"The &quot;Applescript Runner&quot; process is unsupported in Mac OS X Mavericks, so the osascript call for &#39;choose color&#39; is now sent to the &quot;System Events&quot; background process. Fixes textmate/css.tmbundle#13 and MarioRicalde/SCSS.tmbundle#161"},{"commit":"81359c0d1aee2c6c25ded763b5067400ec0964dd","date":"2013-10-10T19:40:03+02:00","author":"Allan Odgaard","summary":"Provide helpful error message for missing Themes bundle"},{"commit":"6bed5248eb278d203357749bd53a10f5f467c0e2","date":"2013-07-13T15:33:52+02:00","author":"Allan Odgaard","summary":"Account for changed directory when linkifying command output","body":"The current working directory of TextMate::Executor is (with newer TextMate builds) the computer’s temporary directory, so we should not resolve file names against it."},{"commit":"765cfac73df5765856e935ff46b55fd18a3c045f","date":"2013-07-09T18:20:45-05:00","author":"Michael Sheets","summary":"Switch to using AppleScript Runner for request_color"},{"commit":"4961eacdcb36aef348e656ea2b92ecb34ad8b3fe","date":"2013-06-13T21:58:16+07:00","author":"Allan Odgaard","summary":"Set working directory for most <kbd class='keyEquivalent'>⌘R</kbd> commands (TextMate.executor)","body":"For projects, the working directory will now be set to the project directory, if there is no project then the file’s directory is used, and if running an untitled document, the user’s home directory is used as a last fallback.\n\nSolves textmate/textmate#994 and textmate/textmate#1010."},{"commit":"083d3579be9899b8df407c6f22a82ddd6e69d746","date":"2013-05-18T23:48:57-05:00","author":"Michael Sheets","summary":"Add bundle description"},{"commit":"dc08ff27ee8c2f424baa805522b8b3ddbe1fbb14","date":"2013-05-09T21:16:46+07:00","author":"Allan Odgaard","summary":"Using <kbd class='keyEquivalent'>⌃C</kbd> to break command execution could throw exception","body":"This would happen if the direct command executed terminates but a child keeps stdout/err open, causing TextMate to wait for the child to finish.\n\nPressing <kbd class='keyEquivalent'>⌃C</kbd> will search for the process ID of the initial process. If this no longer exist, nil is found and subsequently used, causing a “no method” exception.\n\nThe reported case was using the Make bundle with a rule that calls ‘@@mongod --fork’."},{"commit":"7d540628a791fb13e95a4d01aad77e10ca289091","date":"2013-05-09T21:08:58+07:00","author":"Allan Odgaard","summary":"Fix code indenting","body":"Puzzling how it ended up this way as it wasn’t a tab/space mixup and I wrote the original code (and normally do care about indenting code properly ;) )."},{"commit":"bd7d52c5f5b253eab7a48341aca047303a18009e","date":"2013-03-24T15:50:15+01:00","author":"Allan Odgaard","summary":"Show interpreter (<kbd class='keyEquivalent'>⌘R</kbd>) when obtaining version fails","body":"Presently bootstrapped interpreters (compilers) like ‘xcrun clang’ can’t be handled via the current TextMate.executor API, so for now we just show the executable (which in this example would be ‘xcrun’). Not ideal, but better than showing a “random” string."},{"commit":"baf94df0aa3a929e1eb57e6699f27e3612813906","date":"2013-02-26T09:53:00+01:00","author":"Simon COURTOIS","summary":"Converting pathnames to strings","body":"Calling `Run` on an unsaved C program would raise\n`no implicit conversion of Pathname into String (TypeError)`.\nIt concerns only Ruby 1.9+."},{"commit":"48bc9dd6089237c12eed20263849b3362aeca662","date":"2013-03-14T16:46:23+01:00","author":"Allan Odgaard","summary":"Call ‘mate’ via TM_MATE (when set)"},{"commit":"ea38811373a183d5088b35f57a54ebdae167b042","date":"2013-02-22T06:26:12+01:00","author":"Allan Odgaard","summary":"Better hyperlinking of untitled documents","body":"Some interpreters will resolve symbolic links in the path they are given, and use this resolved (“real”) path in the error output (e.g. php and coffee-script).\n\nWhen running untitled documents, we previously only searched for the non-resolved path in the error output (for hyperlinking).\n\nThis issue only applies to code using TextMate.executor that does its own hyperlinking."},{"commit":"6cf19f9211e14731974e4d4f0706ddabb7848819","date":"2013-01-18T04:48:37+01:00","author":"Allan Odgaard","summary":"Update TextMate.executor documentation"},{"commit":"8c9e9d2c5d7cf06d32722554f69b303a143a2fee","date":"2013-01-13T06:22:45+01:00","author":"Allan Odgaard","summary":"Allow exit_show_tool_tip from commands with HTML output","body":"The HTML output view will not open before data has been written to stdout. By writing the tool tip to stderr we avoid showing the HTML view (assuming data hasn’t already been written).\n\nThis is useful for commands that may fail (or succeed) and wish to convey that with a simple tool tip (previously this required setting the command’s output to something other than New Window / HTML and using exit_show_html, but this made the command run non-detached / blocking)."},{"commit":"2031cc9d9cf1824a7a82d4dccbbe512fb82f3fbb","date":"2013-01-13T01:35:24+01:00","author":"Allan Odgaard","summary":"Remove code related to interactive input","body":"We have kept the code to allow expert users to manually install the interactive input lib, but I don’t think it really works on 10.7 and up, which is the minimum requirement for TextMate, so no need to keep this code anymore."},{"commit":"44fa461bab9a7ebb1edf65d8c71802969f541967","date":"2013-01-13T01:00:13+01:00","author":"Allan Odgaard","summary":"Don’t set __CF_USER_TEXT_ENCODING","body":"This was previously required because the default encoding for pbcopy was MacRoman (on a Mac configured for the Western region), so we had to set this variable to make it UTF-8.\n\nFortunately recent versions of OS X have switched most things to UTF-8."},{"commit":"b0021679ef81639eae171334e3e6d7f2306fb5d6","date":"2013-01-10T20:01:01+01:00","author":"Allan Odgaard","summary":"TextMate.executor now parses «file»:«line» references","body":"It will turn these into links to the file and properly handle the case where «file» is pointing to a temporary file (because the document is untitled).\n\nAdditionally, if the current file is unsaved or read-only (but has been saved to a temporary file), it will convert txmt://-references to this temporary file into references to the current document and likewise convert references to the temporary file’s name to the current document’s display name."},{"commit":"901596947bf48522e3d2f50f5c9aca8c3d5a4603","date":"2013-01-10T19:57:25+01:00","author":"Allan Odgaard","summary":"TextMate.executor now accepts a ‘noun’","body":"Previously it would always use the current file’s (display) name for what it was doing. Though for build systems we generally want to show the target, which we can now do without having to overwrite the TM_DISPLAYNAME environment variable."},{"commit":"c46d49717e2e288c87fb6b02bccb92ca86f8842b","date":"2013-01-08T13:51:21+01:00","author":"Allan Odgaard","summary":"Deprecate TextMate.save_current_document","body":"Instead of using this function you should set the command to “Save: Modified Documents” and use TextMate.save_if_untitled in the command — this way, TextMate will handle saving (ensuring requested encoding, save filters, callbacks, and similar) unless the document is untitled.\n\nFor untitled documents the TextMate.save_if_untitled function will save the buffer to a temporary file and setup TM_FILEPATH, TM_FILENAME, and TM_FILE_IS_UNTITLED.\n\nIf TM_FILE_IS_UNTITLED is set and your command needs to link to files (e.g. hyperlinked errors in build/run output) it should not link to TM_FILEPATH. Either create ‘txmt:’ links without a URL or use TM_DOCUMENT_UUID, e.g. txmt://open?uuid=«uuid»&amp;line=32 (requires TextMate 2.0.0-alpha.9339)."},{"commit":"e50669f0312550c43a16d73e3007b93a42697c7c","date":"2013-01-05T03:21:26+01:00","author":"Allan Odgaard","summary":"Don’t overwrite TM_DISPLAYNAME","body":"We used to set the variable because TextMate 1.x did not provide the display name as an environment variable."},{"commit":"35b388fe8564e6231aa482be6f719dbf4d714e61","date":"2012-12-19T04:11:14-06:00","author":"Michael Sheets","summary":"Fallback to bright theme if theme isn&#39;t found, fixes #1."},{"commit":"de06ad8336869b72cddcfac11d355fce9cd75524","date":"2012-12-19T03:35:21-06:00","author":"Michael Sheets","summary":"Remove unused require."},{"commit":"f84bc83a486c58d35e65e1d722ac17244543da03","date":"2012-09-04T14:48:19+03:00","author":"Filip Tepper","summary":"added Ruby 1.9+ compatibility"}],"name":"Bundle Support"}